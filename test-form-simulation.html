<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Simulation Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-result { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background-color: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
    </style>
</head>
<body>
    <h1>Form Submission Test</h1>
    <button onclick="testFormSubmission()">Test Form Submission</button>
    <div id="results"></div>

    <script>
        function testFormSubmission() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<div class="info">Testing form submission...</div>';
            
            // Simulate the form submission logic from the actual form
            const ADMIN_EMAIL = 'admissions@skymirror.eu';
            const webAppUrl = 'YOUR_GOOGLE_APPS_SCRIPT_WEB_APP_URL_HERE';
            const hasValidUrl = webAppUrl && !webAppUrl.includes('YOUR_GOOGLE_APPS_SCRIPT');
            
            const testData = {
                firstName: 'John',
                lastName: 'Doe',
                email: 'john.doe@example.com',
                phone: '+1234567890',
                program: 'Fullstack Development',
                background: 'I have experience in web development',
                whyInterested: 'I want to advance my career',
                VanguardCohortInterest: true
            };
            
            resultsDiv.innerHTML += `<div class="info">Valid URL: ${hasValidUrl}</div>`;
            
            if (hasValidUrl) {
                resultsDiv.innerHTML += '<div class="info">Would attempt Google Apps Script submission</div>';
            } else {
                // Test the fallback email functionality
                const emailBody = `
Application Details:
- Name: ${testData.firstName} ${testData.lastName}
- Email: ${testData.email}
- Phone: ${testData.phone}
- Program: ${testData.program}
- Background: ${testData.background}
- Why Interested: ${testData.whyInterested}
- Vanguard Cohort Interest: ${testData.VanguardCohortInterest ? 'Yes' : 'No'}
                `.trim();
                
                const emailSubject = 'New Application - Skymirror Academy';
                const mailtoLink = `mailto:${ADMIN_EMAIL}?subject=${encodeURIComponent(emailSubject)}&body=${encodeURIComponent(emailBody)}`;
                
                resultsDiv.innerHTML += `<div class="success">Fallback email method activated</div>`;
                resultsDiv.innerHTML += `<div class="info">Email would be sent to: ${ADMIN_EMAIL}</div>`;
                resultsDiv.innerHTML += `<div class="info">Subject: ${emailSubject}</div>`;
                resultsDiv.innerHTML += `<div class="info">Mailto link generated successfully</div>`;
                resultsDiv.innerHTML += `<div class="success">âœ“ Form submission would work via email fallback</div>`;
                
                // Show the mailto link for testing
                resultsDiv.innerHTML += `<div style="margin-top: 20px;"><a href="${mailtoLink}" target="_blank" style="background: #007bff; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">Test Email Submission</a></div>`;
            }
        }
    </script>
</body>
</html>
